## 单例模式

单例模式顾名思义，就是只有一个实例。作为对象的创建模式，单例模式确保某一个类只有一个实例，而且自行实例化并向整个系统提供这个实例。

在很多场景下会用到，如：配置类、Session类、Database类、Cache类、File类等。这些只需要实例化一次，就可以在应用全局中使用。

单例模式的要点有三个：

* 一是某个类只能有一个实例；

* 二是它必须自行创建这个实例；

* 三是它必须自行向整个系统提供这个实例。

单例模式的特点是4私1公：一个私有静态属性，构造方法私有，克隆方法私有，重建方法私有，一个公共静态方法。

为什么要使用PHP单例模式

* php的应用主要在于数据库应用, 一个应用中会存在大量的数据库操作, 在使用面向对象的方式开发时, 如果使用单例模式, 则可以避免大量的new操作消耗的资源,还可以减少数据库连接这样就不容易出现too many connections情况。

* 如果系统中需要有一个类来全局控制某些配置信息,那么使用单例模式可以很方便的实现. 这个可以参看zend Framework的FrontController部分。

* 在一次页面请求中,便于进行调试,因为所有的代码(例如数据库操作类db)都集中在一个类中,我们可以在类中设置钩子,输出日志，从而避免到处var_dump, echo。

单例模式在应用请求的整个生命周期中都有效，这点类似全局变量，会降低程序的可测试性。

大部分情况下，也可以用依赖注入来代替单例模式，避免在应用中引入不必要的耦合。

所以，对于仅需生成一个对象的类，首先考虑用依赖注入方式，其次考虑用单例模式来实现。